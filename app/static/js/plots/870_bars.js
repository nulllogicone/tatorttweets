// Generate a log-normal distribution with a median of 30 minutes.
// var values = d3.range(1000).map(d3.random.logNormal(Math.log(30), .4));
var values = [ 1380, 1377, 1376, 1375, 1375, 1371, 1360, 1359, 1358, 1347,
		1340, 1339, 1339, 1338, 1337, 1336, 1335, 1335, 1335, 1335, 1334, 1332,
		1332, 1330, 1330, 1329, 1328, 1326, 1325, 1325, 1323, 1322, 1321, 1321,
		1321, 1320, 1318, 1315, 1314, 1313, 1312, 1311, 1311, 1311, 1310, 1310,
		1310, 1310, 1309, 1308, 1308, 1307, 1307, 1307, 1306, 1306, 1306, 1306,
		1306, 1306, 1306, 1306, 1306, 1306, 1306, 1305, 1305, 1305, 1305, 1305,
		1305, 1304, 1304, 1304, 1304, 1304, 1304, 1304, 1304, 1304, 1303, 1303,
		1303, 1303, 1303, 1303, 1303, 1303, 1302, 1302, 1302, 1302, 1302, 1302,
		1302, 1301, 1301, 1301, 1301, 1301, 1300, 1300, 1300, 1300, 1300, 1300,
		1300, 1300, 1300, 1300, 1300, 1299, 1299, 1299, 1299, 1299, 1298, 1298,
		1298, 1298, 1298, 1298, 1297, 1297, 1297, 1297, 1297, 1297, 1297, 1297,
		1297, 1297, 1296, 1296, 1296, 1296, 1296, 1296, 1296, 1296, 1295, 1294,
		1294, 1294, 1294, 1294, 1293, 1293, 1293, 1293, 1293, 1293, 1293, 1293,
		1293, 1293, 1293, 1292, 1292, 1292, 1292, 1292, 1291, 1291, 1291, 1291,
		1291, 1291, 1290, 1290, 1290, 1290, 1290, 1290, 1290, 1289, 1289, 1289,
		1289, 1289, 1289, 1289, 1288, 1288, 1288, 1288, 1287, 1287, 1287, 1287,
		1287, 1287, 1286, 1286, 1286, 1286, 1286, 1286, 1286, 1286, 1285, 1285,
		1285, 1285, 1285, 1285, 1285, 1285, 1285, 1285, 1285, 1285, 1285, 1284,
		1284, 1284, 1284, 1284, 1284, 1284, 1284, 1284, 1283, 1283, 1283, 1283,
		1283, 1283, 1283, 1283, 1282, 1282, 1282, 1282, 1282, 1282, 1282, 1282,
		1281, 1281, 1281, 1281, 1281, 1281, 1281, 1281, 1280, 1280, 1280, 1280,
		1280, 1280, 1280, 1280, 1280, 1280, 1280, 1280, 1279, 1279, 1279, 1279,
		1279, 1279, 1279, 1279, 1279, 1279, 1279, 1279, 1279, 1279, 1279, 1278,
		1278, 1277, 1277, 1277, 1277, 1277, 1277, 1276, 1276, 1276, 1276, 1275,
		1275, 1275, 1275, 1275, 1275, 1275, 1275, 1275, 1274, 1274, 1274, 1274,
		1274, 1273, 1273, 1273, 1273, 1273, 1273, 1273, 1273, 1273, 1273, 1273,
		1273, 1273, 1273, 1272, 1272, 1272, 1272, 1272, 1272, 1272, 1272, 1272,
		1272, 1272, 1271, 1271, 1271, 1271, 1271, 1271, 1271, 1271, 1271, 1271,
		1271, 1270, 1270, 1270, 1270, 1270, 1270, 1270, 1269, 1269, 1269, 1269,
		1269, 1269, 1269, 1269, 1269, 1269, 1269, 1269, 1269, 1269, 1269, 1269,
		1269, 1268, 1268, 1268, 1268, 1268, 1268, 1268, 1268, 1268, 1268, 1268,
		1267, 1267, 1267, 1267, 1267, 1267, 1267, 1267, 1267, 1267, 1267, 1266,
		1266, 1266, 1266, 1266, 1266, 1266, 1265, 1265, 1265, 1265, 1265, 1265,
		1265, 1265, 1265, 1264, 1264, 1264, 1264, 1264, 1264, 1264, 1264, 1264,
		1264, 1264, 1264, 1264, 1263, 1263, 1263, 1263, 1263, 1262, 1262, 1262,
		1262, 1262, 1261, 1261, 1261, 1261, 1261, 1261, 1261, 1261, 1261, 1261,
		1261, 1260, 1260, 1260, 1260, 1260, 1260, 1260, 1260, 1259, 1259, 1259,
		1259, 1259, 1259, 1259, 1259, 1259, 1259, 1259, 1259, 1259, 1259, 1259,
		1258, 1258, 1258, 1258, 1258, 1258, 1258, 1258, 1258, 1258, 1257, 1257,
		1257, 1257, 1257, 1257, 1257, 1257, 1257, 1257, 1257, 1256, 1256, 1256,
		1256, 1256, 1256, 1256, 1256, 1256, 1256, 1255, 1255, 1255, 1255, 1255,
		1255, 1255, 1255, 1255, 1255, 1255, 1254, 1254, 1254, 1254, 1254, 1254,
		1253, 1253, 1253, 1253, 1253, 1253, 1253, 1253, 1253, 1253, 1252, 1252,
		1252, 1252, 1252, 1252, 1252, 1252, 1252, 1252, 1251, 1251, 1251, 1251,
		1251, 1251, 1251, 1251, 1251, 1251, 1250, 1250, 1250, 1250, 1250, 1250,
		1250, 1250, 1250, 1250, 1250, 1250, 1249, 1249, 1249, 1249, 1249, 1249,
		1249, 1249, 1249, 1249, 1249, 1249, 1249, 1249, 1249, 1249, 1249, 1248,
		1248, 1248, 1248, 1248, 1248, 1248, 1248, 1247, 1247, 1247, 1247, 1247,
		1247, 1247, 1247, 1247, 1247, 1256, 1256, 1256, 1256, 1256, 1256, 1256,
		1255, 1255, 1255, 1255, 1255, 1255, 1255, 1255, 1255, 1255, 1255, 1254,
		1254, 1254, 1254, 1254, 1254, 1253, 1253, 1253, 1253, 1253, 1253, 1253,
		1253, 1253, 1253, 1252, 1252, 1252, 1252, 1252, 1252, 1252, 1252, 1252,
		1252, 1251, 1251, 1251, 1251, 1251, 1251, 1251, 1251, 1251, 1251, 1250,
		1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1250, 1249,
		1249, 1249, 1249, 1249, 1249, 1249, 1249, 1249, 1249, 1249, 1249, 1249,
		1249, 1249, 1249, 1249, 1248, 1248, 1248, 1248, 1248, 1248, 1248, 1248,
		1247, 1247, 1247, 1247, 1247, 1247, 1247, 1247, 1247, 1247, 1247, 1246,
		1246, 1246, 1246, 1246, 1246, 1246, 1246, 1246, 1246, 1245, 1245, 1245,
		1245, 1245, 1245, 1245, 1245, 1245, 1244, 1244, 1244, 1244, 1244, 1244,
		1244, 1244, 1244, 1244, 1244, 1244, 1244, 1244, 1244, 1244, 1243, 1243,
		1243, 1243, 1243, 1243, 1243, 1243, 1243, 1243, 1243, 1243, 1242, 1242,
		1242, 1242, 1242, 1242, 1242, 1242, 1242, 1242, 1242, 1241, 1241, 1241,
		1241, 1241, 1241, 1241, 1241, 1241, 1241, 1241, 1241, 1240, 1240, 1240,
		1240, 1240, 1239, 1239, 1239, 1239, 1239, 1239, 1239, 1239, 1239, 1239,
		1239, 1239, 1239, 1239, 1239, 1238, 1238, 1238, 1238, 1238, 1238, 1238,
		1238, 1238, 1238, 1238, 1238, 1238, 1238, 1238, 1238, 1238, 1237, 1237,
		1237, 1237, 1237, 1237, 1237, 1237, 1236, 1236, 1236, 1236, 1236, 1236,
		1236, 1236, 1236, 1236, 1236, 1236, 1236, 1236, 1236, 1236, 1236, 1236,
		1235, 1235, 1235, 1235, 1235, 1235, 1235, 1235, 1235, 1235, 1235, 1235,
		1235, 1234, 1234, 1234, 1234, 1234, 1234, 1234, 1234, 1234, 1233, 1233,
		1233, 1233, 1233, 1233, 1233, 1233, 1233, 1233, 1233, 1233, 1233, 1233,
		1233, 1233, 1233, 1232, 1232, 1232, 1232, 1232, 1232, 1232, 1232, 1232,
		1232, 1232, 1232, 1232, 1231, 1231, 1231, 1231, 1231, 1231, 1231, 1231,
		1231, 1231, 1231, 1231, 1231, 1231, 1231, 1231, 1231, 1230, 1230, 1230,
		1230, 1230, 1230, 1230, 1230, 1230, 1230, 1230, 1230, 1230, 1230, 1230,
		1230, 1230, 1230, 1230, 1230, 1230, 1230, 1230, 1230, 1230, 1230, 1230,
		1229, 1229, 1229, 1229, 1229, 1229, 1229, 1229, 1229, 1229, 1229, 1229,
		1229, 1229, 1229, 1229, 1229, 1229, 1229, 1229, 1228, 1228, 1228, 1228,
		1228, 1228, 1228, 1228, 1228, 1228, 1228, 1228, 1228, 1228, 1228, 1228,
		1228, 1228, 1228, 1228, 1228, 1228, 1228, 1227, 1227, 1227, 1227, 1227,
		1227, 1227, 1227, 1227, 1227, 1227, 1227, 1227, 1227, 1227, 1227, 1227,
		1227, 1227, 1227, 1227, 1227, 1226, 1226, 1226, 1226, 1226, 1226, 1226,
		1226, 1226, 1226, 1226, 1226, 1226, 1226, 1226, 1226, 1226, 1226, 1226,
		1226, 1226, 1225, 1225, 1225, 1225, 1225, 1225, 1225, 1225, 1225, 1225,
		1225, 1225, 1225, 1225, 1225, 1225, 1225, 1225, 1225, 1225, 1225, 1225,
		1225, 1224, 1224, 1224, 1224, 1224, 1224, 1224, 1224, 1224, 1224, 1224,
		1224, 1224, 1224, 1224, 1224, 1224, 1224, 1224, 1224, 1224, 1224, 1224,
		1224, 1224, 1224, 1224, 1224, 1224, 1224, 1224, 1224, 1223, 1223, 1223,
		1223, 1223, 1223, 1223, 1223, 1223, 1223, 1223, 1223, 1223, 1223, 1223,
		1223, 1223, 1223, 1223, 1223, 1223, 1223, 1223, 1223, 1223, 1223, 1223,
		1222, 1222, 1222, 1222, 1222, 1222, 1222, 1222, 1222, 1222, 1222, 1222,
		1222, 1222, 1222, 1222, 1222, 1222, 1222, 1222, 1222, 1222, 1222, 1222,
		1222, 1222, 1222, 1222, 1222, 1222, 1222, 1222, 1222, 1221, 1221, 1221,
		1221, 1221, 1221, 1221, 1221, 1221, 1221, 1221, 1221, 1221, 1221, 1221,
		1221, 1221, 1221, 1221, 1221, 1221, 1221, 1221, 1221, 1221, 1221, 1220,
		1220, 1220, 1220, 1220, 1220, 1220, 1220, 1220, 1220, 1220, 1220, 1220,
		1220, 1220, 1220, 1220, 1220, 1220, 1220, 1220, 1220, 1220, 1220, 1220,
		1220, 1220, 1220, 1220, 1219, 1219, 1219, 1219, 1219, 1219, 1219, 1219,
		1219, 1219, 1219, 1219, 1219, 1219, 1219, 1219, 1219, 1219, 1219, 1219,
		1219, 1219, 1219, 1219, 1218, 1218, 1218, 1218, 1218, 1218, 1218, 1218,
		1218, 1218, 1218, 1218, 1218, 1218, 1218, 1218, 1218, 1218, 1218, 1218,
		1217, 1217, 1217, 1217, 1217, 1217, 1217, 1217, 1217, 1217, 1217, 1217,
		1217, 1217, 1217, 1217, 1217, 1217, 1217, 1217, 1217, 1217, 1217, 1216,
		1216, 1216, 1216, 1215, 1215, 1215, 1215, 1214, 1214, 1214, 1214, 1213,
		1213, 1213, 1213, 1213, 1212, 1212, 1212, 1212, 1211, 1211, 1211, 1211,
		1211, 1210, 1209, 1209, 1209, 1208, 1208, 1208, 1208, 1207, 1206, 1206,
		1205, 1205, 1204, 1204, 1204, 1203, 1201, 1201, 1200, 1199, 1199, 1199,
		1199, 1199, 1199, 1199, 1198, 1198, 1197, 1196, 1195, 1195, 1195, 1193,
		1192, 1192, 1192, 1191, 1191, 1190, 1190, 1189, 1189, 1185, 1184, 1184,
		1183, 1183, 1183, 1182, 1182, 1180, 1179, 1179, 1178, 1177, 1177, 1177,
		1173, 1173, 1170, 1168, 1166, 1166, 1166, 1165, 1164, 1163, 1162, 1162,
		1161, 1159, 1158, 1154, 1150, 1148, 1148, 1147, 1146, 1145, 1142, 1140,
		1140, ]



// Formatters for counts and times (converting numbers to Dates).
var formatCount = d3.format(",.0f");

formatTime = d3.time.format("%H:%M"), formatMinutes = function(d) {
	return formatTime(new Date(2012, 0, 1, 0, d));
};

var margin = {
	top : 10,
	right : 30,
	bottom : 30,
	left : 30
}, width = 960 - margin.left - margin.right, height = 500 - margin.top
		- margin.bottom;

var endminutes = 1380
var startminutes = 1140
var x = d3.scale.linear().domain([ startminutes, endminutes ]).range(
		[ 0, width ]);

// Generate a histogram using twenty uniformly-spaced bins.
var data = d3.layout.histogram().bins(x.ticks((endminutes - startminutes)))(
		values);

var y = d3.scale.linear().domain([ 0, 350 ]).range([ height, 0 ]);

// var y = d3.scale.linear().domain([ 0, d3.max(data, function(d) {
// return d.y;
// }) ]).range([ height, 0 ]);

var xAxis = d3.svg.axis().scale(x).orient("bottom").tickFormat(formatMinutes);

var yAxis = d3.svg.axis().scale(y).orient("left");

var svg = d3.select("#verlauf").append("svg").attr("width",
		width + margin.left + margin.right).attr("height",
		height + margin.top + margin.bottom).append("g").attr("transform",
		"translate(" + margin.left + "," + margin.top + ")");

var bar = svg.selectAll(".bar").data(data).enter().append("g").attr("class",
		"bar").attr("transform", function(d) {
	return "translate(" + x(d.x) + "," + y(d.y) + ")";
});

// var numbins = data.length;
var numbins = endminutes - startminutes;
var barWidth = width / numbins;

bar.append("rect").attr("x", 1).attr("width", barWidth - 1)
// .attr("width", x(data[0].dx) - 1)
// .attr("width", (x(data[0].dx) - x(0)) - 1)
.attr("height", function(d) {
	return height - y(d.y);
});

// bar.append("text")
// .attr("dy", ".75em")
// .attr("y", 6)
// // .attr("x", x(data[0].dx) / 2)
// .attr("text-anchor", "middle")
// .text(function(d) { return formatCount(d.y); });

svg.append("g").attr("class", "x axis").attr("transform",
		"translate(0," + height + ")").call(xAxis);

svg.append("g").attr("class", "y axis").call(yAxis).append("text").attr(
		"transform", "rotate(-90)").attr("y", 6).attr("dy", ".71em").style(
		"text-anchor", "end").text("Anzahl Tweets");